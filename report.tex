\documentclass[12pt,a4paper]{jsarticle}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[dvipdfmx]{graphicx}
\usepackage{lmodern}
\usepackage{amsmath,amssymb}
\usepackage{hyperref, url}
\usepackage{caption}
\usepackage{float}
\usepackage{here}
\usepackage{array}
\usepackage{listings, xcolor}

% --- Java用の色定義 ---
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

% --- 共通設定 ---
\lstset{
    language=Java,                % 言語をJavaに設定
    basicstyle={\ttfamily\small}, % 標準のフォント
    keywordstyle=\color{red},     % キーワード（public, class等）の色
    commentstyle=\color{gray},    % コメントの色
    stringstyle=\color{blue},     % 文字列の色
    numbers=left,                 % 行番号を左に表示
    numberstyle=\tiny\color{gray},% 行番号のサイズと色
    stepnumber=1,                 % 行番号のステップ
    numbersep=10pt,               % 行番号とコードの距離
    backgroundcolor=\color{white},% 背景色
    showspaces=false,             % スペースを記号で表示しない
    showstringspaces=false,       % 文字列中のスペースを記号で表示しない
    showtabs=false,               % タブを記号で表示しない
    frame=single,                 % 外枠（1本線）
    rulecolor=\color{black},      % 枠線の色
    tabsize=4,                    % タブの幅
    captionpos=t,                 % キャプションを上に配置
    breaklines=true,              % 長い行を自動折り返し
    breakatwhitespace=false,      % スペース以外でも折り返す
    title=\lstname,               % ファイル名を表示
    columns=[l]{fullflexible},    % 文字の間隔（日本語対応）
    keepspaces=true               % 空白を維持
}

\title{情報理工学域 メディア情報学プログラム\\
    プログラミング演習 最終レポート}
\author{DX2 グループ11 Gladiator
    \vspace{4mm}\\
    2411593 齋藤寛仁\\
    2411603 佐々木晃誠\\
    2411712 Puller Stefano Daniele}
\date{2026年2月18日}

\begin{document}
\maketitle

\newpage
\section{概要説明}
% どの様な目的のプログラムを実現したか，どのような機能を実装したか，をまず最初に説明してください．
% 必要に応じてスクリーンキャプチャした画像も張り付けてください．
% 作業の分担など，作業をどのように進めたかも説明して下さい．

私たちのグループは、シンプルなシューティングゲームを作成しました。画面上部から敵がランダムに降りてきて攻撃します。敵を躱したり、矢を放って敵を迎え撃ちます。敵を倒すことでスコアが上昇し、一定のスコアに達するとボスが登場します。各ステージのボスを倒すことで、次のステージに移動します。ボスを倒すとそのキャラの特殊スキルを自分の能力として使うことができるようになります。プレイヤーのライフが0になるとゲームオーバーです。\\
\indent 基本的なキー操作は移動と攻撃で、カーソルキーで移動し、Spaceキーで矢を放って攻撃します。プレイ中に一時停止することも可能です。\\
\indent プレイヤーのライフは3が上限で、敵に当たるか敵の攻撃を受けると1減ります。ボスが登場したタイミングと、ボスを倒して次のステージに進んだタイミングでライフが全回復します。\\
\indent プレイ画面の上部には、現在のスコアとステージ数、プレイヤーの残りライフが表示されています。特殊スキルは画面下部に順次追加されます。
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.25]{play.eps}
    \caption{プレイ画面}
\end{figure}
MVCモデルを採用し、主にPullerがM、佐々木がV、斎藤がCを担当しました。プログラムのコードはGitHubで管理しました。また、「実装予定機能リスト」を作成し、未開発の機能を赤、開発中の機能をオレンジ、開発済みの機能を緑にし、開発中の機能の最後に『(名前)』を書いて、誰が今どの機能を開発中なのかを一目で把握できるようにしました。

{\raggedleft (文責：佐々木)\par}

\section{設計方針}
% プログラムの基本構想を述べて下さい．
% どのようなアルゴリズム，データ構造を用いて，目的の処理を実現するのか説明しましょう．なぜそのようなアルゴリズム，データ構造を用いたかという考察も含めてください．
% ただし，ここでは，プログラムコードの細部には触れる必要はありません．それは次の章で行います．
% 今回はJavaプログラミングなので，どのようなクラスを用意して，どのように利用するかを説明してください。クラス図を使用して，主要なクラス間の関係を説明するしましょう。
% なお，クラス図を書くときは，すでにあるものを利用したクラス(レポートで特に説明しないクラス)と，新しく作成したクラスは区別が付くようにしましょう．

\section{プログラムの説明}
% 作成したすべてのクラスを説明してください．主な各クラスの主なメソッド，フィールドの説明を行ってください．必要に応じてプログラムリストを抜粋して説明しましょう．
% ここは，必ず，メンバー全員がそれぞれ自分の担当した部分についての説明を書くようにしてください．発表会でのプレゼンと同様に各自の担当部分のセールスポイト(実装した機能，採用したデータ構造やアルゴリズムなどについて) も書いて下さい．「文責：○○」も忘れずに書くようにしてください．
% 本授業HPにあるひな形コード，もしくはWeb上のコードをひな形として利用した場合は，その旨明記して下さい。Web上のコードを元にした場合は，必ずURLも書いてください。その場合，ひな型に最初から含まれていた，主要なメソッド，フィールドについても説明を行って，※などの印を付けて，追加したメソッド，フィールドと区別できるようにしてください。

\subsection{齋藤担当}

\subsection{佐々木担当}
私は主にView層におけるUIの実装と、Model層におけるプレイヤーのライフ・ダメージ処理を担当しました。\\
\textbf{1、ゲーム画面およびHUDの実装}\\
\indent ユーザーが直感的に状況を把握できるよう、ゲームの状態に応じた画面遷移を実装しました。具体的には、ゲーム起動時の「タイトル画面」、操作説明を含む「スタート画面」、そして「ゲームオーバー画面」を作成しました。ゲームオーバー時には最終スコアを表示し、キー入力（Cで継続、Qで終了）によって次のアクションを選択できる機能を設けています。また、プレイ画面上部のHUDでは、現在のスコア、進行中のステージ数、およびプレイヤーの残りライフをリアルタイムで表示するようにしました。ライフは数字ではなくハートのアイコンを用いることで、視認性を高めています。
\begin{lstlisting}[caption = HUDの描画(GamePanel.java)]
    public class GamePanel extends JPanel implements KeyListener {
        private void drawTopHUD(Graphics g) {
            // Draw dark background bar
            g.setColor(new Color(50, 50, 80));
            g.fillRect(0, 0, GameConstants.WINDOW_WIDTH, GameConstants.HUD_HEIGHT);

            // Draw white separator line
            g.setColor(Color.WHITE);
            g.drawLine(0, GameConstants.HUD_HEIGHT, GameConstants.WINDOW_WIDTH, GameConstants.HUD_HEIGHT);

            // Font settings
            setPixelFont(g, 18f);
            int textY = 35;

            // A. Score
            g.drawString("SCORE:" + model.getScore(), 10, textY);

            // B. Stage (Centered)
            String stageText = model.getStageText();
            int stageX = (GameConstants.WINDOW_WIDTH - g.getFontMetrics().stringWidth(stageText)) / 2;
            g.drawString(stageText, stageX, textY);

            // C. Hearts / Lives (Right aligned)
            int maxLives = GameConstants.PLAYER_MAX_LIVES;
            int currentLives = model.getLives();
            int heartSize = 32;
            int spacing = 8;
            int startX = GameConstants.WINDOW_WIDTH - 20 - (maxLives * (heartSize + spacing));
            int heartY = (GameConstants.HUD_HEIGHT - heartSize) / 2;

            for (int i = 0; i < maxLives; i++) {
                // Determine which icon to draw (Full or Empty)
                BufferedImage icon = (i < currentLives) ? ResourceManager.heartFullImg : ResourceManager.heartEmptyImg;

                if (icon != null) {
                    g.drawImage(icon, startX + (i * (heartSize + spacing)), heartY, heartSize, heartSize, null);
                } else {
                    // Fallback drawing if images are missing
                    g.setColor(i < currentLives ? Color.RED : Color.GRAY);
                    g.fillOval(startX + (i * (heartSize + spacing)), heartY, heartSize, heartSize);
                }
            }
        }
    }
\end{lstlisting}

\noindent \textbf{2、ライフ制度と無敵時間の導入}\\
\indent ゲームの難易度調整とプレイ体験の向上のため、プレイヤーに3つのライフを付与するシステムを構築しました。初期の実装では、敵や弾に接触した際、当たり判定が連続して発生しライフが一瞬で0になってしまう「多段ヒット」の問題が発生していました。これを解消するために、ダメージを受けた直後に一定時間の「無敵時間(クールタイム)」を導入しました。ダメージ発生時に damageTimer をセットし、このタイマーが作動している間は新たなダメージを受け付けないように処理を分岐させています。さらに、無敵時間中はプレイヤーキャラクターを点滅させることで、視覚的にもダメージを受けたことと無敵状態であることをユーザーが理解しやすいようにしました。

\subsection{Puller担当}

\section{実行例}
% 実行例をスクリーンショットを使って，分かりやすく説明してください．特に，作成したプログラムの特徴となるような機能については，実際の使用例を分かりやすく説明するようにしてください．

\section{考察}
% 完成したプログラムに対する考察，コメントを述べてください．当初予定していた通りの物ができたか考察してください．また，考察を踏まえて，今後の改良点についても述べてください．

\section{感想}
% グループでの作業を通しての反省や感想，それから考察できること．
% 今後の各自の担当部分の課題．やり残したこと．
% Javaやオブジェクト指向，MVCモデルなど学習内容に関する感想。
% 「プログラミング演習」の授業に関する感想や要望．

\subsection{齋藤}

\subsection{佐々木}
本授業を通じて、初めてのJavaの学習から始まり、最終的にはグループでのゲーム開発という実践的な演習に取り組みました。Java特有のオブジェクト指向における「継承」の概念は、初めは難しかったものの、開発が進むにつれてコードの再利用性を高めるために不可欠な技術であることを実感しました。\\
\indent 開発手法としてはMVCモデルを採用し、私は主にVとMの一部を担当しました。具体的には、ゲームの入り口となるタイトル画面やスタート画面、そしてプレイ画面やゲームオーバー画面といったUI全般の実装に注力しました。単にグラフィックを表示するだけでなく、ゲームの状態に応じて動的に表示を切り替えるロジック部分の構築も経験し、UIと内部処理がどう連携すべきかを深く意識することができました。\\
\indent また、GitHubを用いた共同開発も初めての経験でした。ブランチの管理やコンフリクトの解消など、個人開発では味わえない困難もありましたが、チームで一つのソースコードを育て上げる過程でバージョン管理の重要性を学びました。技術的な習得だけでなく、メンバーと協力して一つのプロジェクトを完遂する難しさと喜びを知ることができ、非常に実りある経験となりました。

{\raggedleft (文責：佐々木)\par}

\subsection{Puller}

\section{付録1：操作法マニュアル}
% そのプログラムを初めて使う人向けの説明書を書いてください．ドローエディタなら操作法の説明，ゲームならキー操作の説明などを書いてください．スクリーンキャプチャした画像に説明を書き込んだりしてもいいでしょう。2ページ程度の簡潔な説明書で構いません。

ゲームを起動すると、タイトル画面が出てきます。Spaceキーを押してスタート画面に移り、再度Spaceキーを押すことでゲームが始まります。
\begin{figure}[H]
    \centering
    \begin{minipage}{0.4\columnwidth}
        \centering
        \includegraphics[width=\textwidth]{title.eps}
        \caption{タイトル画面}
    \end{minipage}
    \hfill
    \begin{minipage}{0.4\columnwidth}
        \centering
        \includegraphics[width=\textwidth]{start.eps}
        \caption{スタート画面}
    \end{minipage}
\end{figure}

次に、プレイ中のキー操作について説明します。
\begin{table}[H]
    \centering
    \caption{プレイ中のキー操作}
    \begin{tabular}{|c|c|m{20em}|}
        \hline
        移動 & カーソルキー & 画面全体を縦横無尽に移動。 \\
        \hline
        攻撃 & Spaceキー & 長押しで連射が可能。 \\
        \hline
        一時停止、再開 & P & プレイ中に押すことでゲームを一時停止、再度押すことでゲームを再開。 \\
        \hline
        特殊スキル & 1,2,3 & 各ステージのボスを倒すことで手に入る特殊スキルは、それぞれ1,2,3を押すことで発動。 \\
        \hline
    \end{tabular}
\end{table}

ゲームオーバー時には、Cを押すとゲームをもう一度プレイ(Continue)でき、Qを押すとゲームをやめる(Quit)ことができます。
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.25]{gameover.eps}
    \caption{ゲームオーバー画面}
\end{figure}

{\raggedleft (文責：佐々木)\par}

\section{付録２：プログラムリスト}
% プログラムリストは本文中には説明に必要な部分だけ抜粋して掲載して，プログラムリスト全体はレポートの最後に「付録」として付ける。プログラムコードには，主なメソッド，フィールドの説明など最低限のコメントは付ける。さらに，cat -n コマンドなどで行番号を付与してから載せること．

\lstinputlisting[caption = Main.java]{src/main/Main.java}

\lstinputlisting[caption = GameModel.java]{src/model/GameModel.java}
\lstinputlisting[caption = GameConstants.java]{src/model/GameConstants.java}
\lstinputlisting[caption = GameObject.java]{src/model/GameObject.java}
\lstinputlisting[caption = GameState.java]{src/model/GameState.java}
\lstinputlisting[caption = Alignment.java]{src/model/Alignment.java}
\lstinputlisting[caption = Background.java]{src/model/Background.java}
\lstinputlisting[caption = Projectile.java]{src/model/Projectile.java}
\lstinputlisting[caption = Player.java]{src/model/Player.java}
\lstinputlisting[caption = Arrow.java]{src/model/Arrow.java}
\lstinputlisting[caption = BossProjectile.java]{src/model/BossProjectile.java}
\lstinputlisting[caption = Boss.java]{src/model/Boss.java}
\lstinputlisting[caption = Apollo.java]{src/model/Apollo.java}
\lstinputlisting[caption = Sun.java]{src/model/Sun.java}
\lstinputlisting[caption = Zeus.java]{src/model/Zeus.java}
\lstinputlisting[caption = Lighting.java]{src/model/Lighting.java}
\lstinputlisting[caption = HostileEntity.java]{src/model/HostileEntity.java}
\lstinputlisting[caption = EnemySpawner.java]{src/model/EnemySpawner.java}
\lstinputlisting[caption = Boulder.java]{src/model/Boulder.java}
\lstinputlisting[caption = Cyclops.java]{src/model/Cyclops.java}
\lstinputlisting[caption = Feather.java]{src/model/Feather.java}
\lstinputlisting[caption = Harpy.java]{src/model/Harpy.java}
\lstinputlisting[caption = Minion.java]{src/model/Minion.java}

\lstinputlisting[caption = GamePanel.java]{src/view/GamePanel.java}
\lstinputlisting[caption = ResourceManager.java]{src/view/ResourceManager.java}

{\raggedleft (文責：佐々木)\par}

\end{document}